---
name: plan-review-deep-go
description: Goバックエンドの実装計画を周辺実装まで読み込んで精査するための深掘りレビュー手順。計画レビュー・設計妥当性チェック時に使う。
---

# Plan Review Deep (Go Backend)

このスキルは「コストをかけても計画レビューを正確にしたい」時に使う。
周辺実装を読み込み、計画の妥当性・漏れ・リスクを網羅的に指摘する。

## ガイドライン
- @docs/guidelines/go_*

## ワークフロー（必須）
1. 計画の要約と「変更対象」「影響範囲」「前提」を抽出する。
2. 影響箇所の洗い出し（rg 基準）。
   - 型/構造体、UseCase、Repository/SQL、Handler/API、テストを順に探索
3. 変更対象ファイルを実際に読み込み、計画との差分と漏れを確認する。
4. 必読ガイドラインを読み、遵守状況・不足をチェックする。
5. リスク評価を行う（NULL/互換性/性能/セキュリティ/運用/移行）。
6. テスト妥当性を検証（ケース名の粒度、subtest、require/assertの使い分け）。
7. 重要度順にレビューを出力する。

## 影響箇所の探索（指針）
- 検索の順序: 型定義 → 変換ロジック → クエリ → Handler/Router → テスト
- 典型的な検索語: 型名、JSONタグ、SQLファイル名、エンドポイント名
- SQL変更時: 生成コードの再生成やScan型の整合を確認

## 典型的な落とし穴チェック
- NULL Scan（string/intへのNULL）
- 互換性（APIレスポンス/JSONタグ/Swagger）
- 既存データの移行/デフォルト
- キャッシュ/検索インデックス/非同期処理の影響
- テスト追加漏れ・既存テストの観点不足

## レビュー出力テンプレ
- 重要度順の指摘（ファイル/行 根拠付き）
- 確認したい前提/仕様
- 追加提案（必要時のみ）

## 出力方針
- 指摘は「重大→中→低」で並べる
- 可能な限り具体的な箇所（ファイル/行）を示す
- 不確実な点は必ず確認事項として分離する
